# ============================================================================
# KSQLDB SERVER CONFIGURATION
# ============================================================================

# Bootstrap servers
bootstrap.servers=kafka01:9092,kafka02:9092,kafka03:9092

# Listeners
listeners=http://0.0.0.0:8088
advertised.listener=http://ksqldb-server:8088

# Schema Registry
ksql.schema.registry.url=http://schema-registry:8081

# Service ID (unique for this ksqlDB cluster)
ksql.service.id=default_

# Streams configuration
ksql.streams.auto.offset.reset=earliest
ksql.streams.commit.interval.ms=2000
ksql.streams.cache.max.bytes.buffering=10000000
ksql.streams.num.stream.threads=4

# State store directory
ksql.streams.state.dir=/var/lib/ksqldb/data

# Query processing
ksql.query.pull.enable.standby.reads=false
ksql.query.push.v2.enabled=true
ksql.query.push.v2.registry.installed=true

# Persistence
ksql.persistence.default.format.key=KAFKA
ksql.persistence.default.format.value=AVRO

# Internal topics configuration
ksql.internal.topic.replicas=3
ksql.internal.topic.min.insync.replicas=2

# Logging
ksql.logging.processing.topic.auto.create=true
ksql.logging.processing.topic.name=_confluent-ksql-default__processing_log
ksql.logging.processing.topic.replication.factor=3
ksql.logging.processing.stream.auto.create=true
ksql.logging.processing.rows.include=true

# Producer settings
ksql.streams.producer.acks=all
ksql.streams.producer.retries=2147483647
ksql.streams.producer.confluent.batch.expiry.ms=9223372036854775807
ksql.streams.producer.max.block.ms=9223372036854775807
ksql.streams.producer.request.timeout.ms=300000
ksql.streams.producer.delivery.timeout.ms=2147483647

# Consumer settings
ksql.streams.consumer.max.poll.interval.ms=300000
ksql.streams.consumer.session.timeout.ms=60000
ksql.streams.consumer.heartbeat.interval.ms=3000

# Connect integration (for embedded Connect)
# ksql.connect.url=http://kafka-connect:8083

# Access control (disable for development)
ksql.security.extension.class=

# UDF settings
ksql.udf.enable.security.manager=true

# Metrics
ksql.metrics.tags.custom=cluster:observability

# Security settings (uncomment when SASL/SSL is enabled)
# security.protocol=SASL_SSL
# sasl.mechanism=PLAIN
# sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username="ksql" password="ksql-secret";
# ssl.truststore.location=/var/ssl/private/kafka-client.truststore.jks
# ssl.truststore.password=kafka-secret
